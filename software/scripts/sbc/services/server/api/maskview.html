<!DOCTYPE html>
<html>
<head>
	<title>RTSP Mask View</title>
</head>
<body>
	<video id="video" autoplay playsinline></video>

	<script>
		const pc = new RTCPeerConnection();
		const offer = await pc.createOffer();

		pc.ontrack = function(event) {
			document.getElementById("video").srcObject = event.streams[0];
		};

		await pc.setLocalDescription(offer);

		const response = await fetch("/mask/webrtc", {
			method: "POST",
			headers: { "Content-Type": "application/json" },
			body: JSON.stringify(pc.localDescription)
		});

		const answer = await response.json();
		await pc.setRemoteDescription(answer);
	</script>
</body>
</html>

